[
  {
    "path": "posts/2021-07-04-yt-assignment-mc2/",
    "title": "VAST Challenge 2021: Mini Challenge 2: ",
    "description": "We are asked to analyze movement and tracking data of GAStech employees to identity anomolies and suspicious behaviour.",
    "author": [
      {
        "name": "HONG Yun Ting",
        "url": {}
      }
    ],
    "date": "2021-07-01",
    "categories": [],
    "contents": "\nOverview\nGAStech is a company that is located in a country island of Kronos and it has come to their attention that some of the employees had mysteriously went missing. Vehicles tracking data that was secretly installed in the company’s cars and Kronos-Kares benefit card information are delivered to authorities for investigation.\nLiterature review of existing analysis performed\n3. Extracting, wrangling and preparing the input data\n3.1 Setting up environment\n\n\npackages = c('tidyverse', 'lubridate', 'dplyr', 'raster', 'clock', 'sf', 'tmap', 'plotly', 'ggplot2', 'mapview', 'rgdal',\n             'rgeos', 'tidyr')\n\nfor (p in packages) {\n  if (!require(p, character.only = T)) {\n    install.packages(p, repos = \"http://cran.us.r-project.org\")\n  }\n  library(p, character.only = T)\n}\n\n\n\nImporting Employee’s Info and Car Assignment\n\n\ncarAssignment <- read_csv(\"mc2/car-assignments.csv\") \ncarAssignment\n\n\n# A tibble: 44 x 5\n   LastName    FirstName CarID CurrentEmploymentT… CurrentEmploymentT…\n   <chr>       <chr>     <dbl> <chr>               <chr>              \n 1 Calixto     Nils          1 Information Techno… IT Helpdesk        \n 2 Azada       Lars          2 Engineering         Engineer           \n 3 Balas       Felix         3 Engineering         Engineer           \n 4 Barranco    Ingrid        4 Executive           SVP/CFO            \n 5 Baza        Isak          5 Information Techno… IT Technician      \n 6 Bergen      Linnea        6 Information Techno… IT Group Manager   \n 7 Orilla      Elsa          7 Engineering         Drill Technician   \n 8 Alcazar     Lucas         8 Information Techno… IT Technician      \n 9 Cazar       Gustav        9 Engineering         Drill Technician   \n10 Campo-Corr… Ada          10 Executive           SVP/CIO            \n# … with 34 more rows\n\nImport Credit card and Loyalty card data\n\n\nccData <- read_csv(\"MC2/cc_data.csv\")\nccData$timestamp = date_time_parse(ccData$timestamp, zone = \"\", format = \"%m/%d/%Y %H:%M\")\n\nccData <- ccData %>%\n  mutate(date = as.Date(timestamp), time = strftime(timestamp, \"%H:%M\"), hr = strftime(timestamp, \"%H\"))\n\n\nloyaltyData <- read_csv(\"MC2/loyalty_data.csv\") %>%\n  mutate(date = as.Date(mdy(timestamp)))\n\n\nccLoyalty <- left_join(ccData, loyaltyData, by = c(\"date\", \"location\", \"price\")) %>%\n  dplyr::select(date, time, location, price, last4ccnum, loyaltynum, hr) %>%\n  group_by(last4ccnum)\n\nccLoyalty$weekday = wday(ccLoyalty$date, label = TRUE, abbr = TRUE) \nccLoyalty$last4ccnum = as.character(ccLoyalty$last4ccnum)\n\nccLoyalty\n\n\n# A tibble: 1,496 x 8\n# Groups:   last4ccnum [55]\n   date       time  location price last4ccnum loyaltynum hr    weekday\n   <date>     <chr> <chr>    <dbl> <chr>      <chr>      <chr> <ord>  \n 1 2014-01-05 07:28 Brew've… 11.3  4795       <NA>       07    Sun    \n 2 2014-01-05 07:34 Hallowe… 52.2  7108       <NA>       07    Sun    \n 3 2014-01-05 07:35 Brew've…  8.33 6816       <NA>       07    Sun    \n 4 2014-01-05 07:36 Hallowe… 16.7  9617       <NA>       07    Sun    \n 5 2014-01-05 07:37 Brew've…  4.24 7384       <NA>       07    Sun    \n 6 2014-01-05 07:38 Brew've…  4.17 5368       <NA>       07    Sun    \n 7 2014-01-05 07:42 Coffee … 28.7  7253       <NA>       07    Sun    \n 8 2014-01-05 07:43 Brew've…  9.6  4948       <NA>       07    Sun    \n 9 2014-01-05 07:43 Brew've… 16.9  9683       <NA>       07    Sun    \n10 2014-01-05 07:47 Hallowe… 16.5  8129       <NA>       07    Sun    \n# … with 1,486 more rows\n\n\n# A tibble: 64 x 2\n# Groups:   last4ccnum [55]\n   last4ccnum loyaltynum\n   <chr>      <chr>     \n 1 1286       L3572     \n 2 1286       L3288     \n 3 1310       L8012     \n 4 1321       L4149     \n 5 1415       L7783     \n 6 1874       L4424     \n 7 1877       L3014     \n 8 2142       L9637     \n 9 2276       L3317     \n10 2418       L9018     \n# … with 54 more rows\n# A tibble: 64 x 3\n# Groups:   last4ccnum [55]\n   last4ccnum loyaltynum ccPerson\n   <chr>      <chr>         <int>\n 1 1286       L3572             1\n 2 1286       L3288             1\n 3 1310       L8012             2\n 4 1321       L4149             3\n 5 1415       L7783             4\n 6 1874       L4424             5\n 7 1877       L3014             6\n 8 2142       L9637             7\n 9 2276       L3317             8\n10 2418       L9018             9\n# … with 54 more rows\n\n\n\n\n\n   loyaltynum last4ccnum.x ccPerson last4ccnum.y\n1       L3288         1286        1         9241\n2       L3288         1286        1         1286\n3       L3572         1286        1         1286\n4       L8012         1310        2         1310\n5       L4149         1321        3         1321\n6       L7783         1415        4         1415\n7       L4424         1874        5         1874\n8       L3014         1877        6         1877\n9       L9637         2142        7         2142\n10      L3317         2276        8         2276\n11      L9018         2418        9         2418\n12      L6886         2463       10         2463\n13      L5947         2540       11         2540\n14      L1107         2681       12         2681\n15      L2490         3484       13         3484\n16      L7814         3492       14         3492\n17      L7761         3506       15         3506\n18      L9362         3547       16         3547\n19      L1485         3853       17         3853\n20      L2169         4434       18         4434\n21      L8477         4530       19         4530\n22      L2070         4795       20         4795\n23      L2070         4795       20         8332\n24      L8566         4795       20         8332\n25      L8566         4795       20         4795\n26      L3295         4948       21         5921\n27      L3295         4948       21         4948\n28      L9406         4948       21         5921\n29      L9406         4948       21         8202\n30      L9406         4948       21         4948\n31      L2459         5010       22         5010\n32      L2247         5368       23         7889\n33      L2247         5368       23         5368\n34      L6119         5368       23         5368\n35      L6119         5368       23         7889\n36      L4034         5407       24         5407\n37      L3295         5921       25         5921\n38      L3295         5921       25         4948\n39      L9406         5921       25         5921\n40      L9406         5921       25         8202\n41      L9406         5921       25         4948\n42      L6267         6691       26         6899\n43      L6267         6691       26         6691\n44      L8148         6816       27         6816\n45      L3366         6895       28         6895\n46      L6267         6899       29         6899\n47      L6267         6899       29         6691\n48      L9363         6901       30         6901\n49      L6544         7108       31         7108\n50      L6417         7117       32         7117\n51      L1682         7253       33         7253\n52      L6110         7354       34         7354\n53      L6110         7354       34         8411\n54      L9254         7354       34         7354\n55      L3800         7384       35         7384\n56      L4164         7688       36         7688\n57      L5756         7792       37         7792\n58      L5259         7819       38         7819\n59      L2247         7889       39         7889\n60      L2247         7889       39         5368\n61      L6119         7889       39         5368\n62      L6119         7889       39         7889\n63      L8328         8129       40         8129\n64      L5224         8156       41         8156\n65      L2343         8202       42         8202\n66      L9406         8202       42         5921\n67      L9406         8202       42         8202\n68      L9406         8202       42         4948\n69      L2070         8332       43         4795\n70      L2070         8332       43         8332\n71      L8566         8332       43         8332\n72      L8566         8332       43         4795\n73      L6110         8411       44         7354\n74      L6110         8411       44         8411\n75      L2769         8642       45         8642\n76      L5485         9152       46         9152\n77      L4063         9220       47         9220\n78      L3288         9241       48         9241\n79      L3288         9241       48         1286\n80      L3259         9405       49         9405\n81      L5777         9551       50         9551\n82      L5924         9614       51         9614\n83      L5553         9617       52         9617\n84      L3191         9635       53         9635\n85      L7291         9683       54         9683\n86      L9633         9735       55         9735\n\n\n   ccPerson last4ccnum.y\n1         1         9241\n2         1         1286\n3         2         1310\n4         3         1321\n5         4         1415\n6         5         1874\n7         6         1877\n8         7         2142\n9         8         2276\n10        9         2418\n11       10         2463\n12       11         2540\n13       12         2681\n14       13         3484\n15       14         3492\n16       15         3506\n17       16         3547\n18       17         3853\n19       18         4434\n20       19         4530\n21       20         4795\n22       20         8332\n23       21         5921\n24       21         4948\n25       21         8202\n26       22         5010\n27       23         7889\n28       23         5368\n29       24         5407\n30       26         6899\n31       26         6691\n32       27         6816\n33       28         6895\n34       30         6901\n35       31         7108\n36       32         7117\n37       33         7253\n38       34         7354\n39       34         8411\n40       35         7384\n41       36         7688\n42       37         7792\n43       38         7819\n44       40         8129\n45       41         8156\n46       45         8642\n47       46         9152\n48       47         9220\n49       49         9405\n50       50         9551\n51       51         9614\n52       52         9617\n53       53         9635\n54       54         9683\n55       55         9735\n   loyaltynum last4ccnum.x ccPerson last4ccnum.y\n1       L3288         1286        1         9241\n2       L3288         1286        1         1286\n3       L3572         1286        1         1286\n4       L8012         1310        2         1310\n5       L4149         1321        3         1321\n6       L7783         1415        4         1415\n7       L4424         1874        5         1874\n8       L3014         1877        6         1877\n9       L9637         2142        7         2142\n10      L3317         2276        8         2276\n11      L9018         2418        9         2418\n12      L6886         2463       10         2463\n13      L5947         2540       11         2540\n14      L1107         2681       12         2681\n15      L2490         3484       13         3484\n16      L7814         3492       14         3492\n17      L7761         3506       15         3506\n18      L9362         3547       16         3547\n19      L1485         3853       17         3853\n20      L2169         4434       18         4434\n21      L8477         4530       19         4530\n22      L2070         4795       20         4795\n23      L2070         4795       20         8332\n24      L8566         4795       20         8332\n25      L8566         4795       20         4795\n26      L3295         4948       21         5921\n27      L3295         4948       21         4948\n28      L9406         4948       21         5921\n29      L9406         4948       21         8202\n30      L9406         4948       21         4948\n31      L2459         5010       22         5010\n32      L2247         5368       23         7889\n33      L2247         5368       23         5368\n34      L6119         5368       23         5368\n35      L6119         5368       23         7889\n36      L4034         5407       24         5407\n37      L6267         6691       26         6899\n38      L6267         6691       26         6691\n39      L8148         6816       27         6816\n40      L3366         6895       28         6895\n41      L9363         6901       30         6901\n42      L6544         7108       31         7108\n43      L6417         7117       32         7117\n44      L1682         7253       33         7253\n45      L6110         7354       34         7354\n46      L6110         7354       34         8411\n47      L9254         7354       34         7354\n48      L3800         7384       35         7384\n49      L4164         7688       36         7688\n50      L5756         7792       37         7792\n51      L5259         7819       38         7819\n52      L8328         8129       40         8129\n53      L5224         8156       41         8156\n54      L2769         8642       45         8642\n55      L5485         9152       46         9152\n56      L4063         9220       47         9220\n57      L3259         9405       49         9405\n58      L5777         9551       50         9551\n59      L5924         9614       51         9614\n60      L5553         9617       52         9617\n61      L3191         9635       53         9635\n62      L7291         9683       54         9683\n63      L9633         9735       55         9735\n\nMapping credit cards and loyalty card to same person\n1 employee can carries multiple credit cards and loyalty cards\n\n# A tibble: 1,496 x 8\n# Groups:   last4ccnum [55]\n   ccPerson weekday date       time  location         price last4ccnum\n      <int> <ord>   <date>     <chr> <chr>            <dbl> <chr>     \n 1        1 Mon     2014-01-06 08:16 Brew've Been S…  15.0  1286      \n 2        1 Mon     2014-01-06 12:00 Jack's Magical…  18.6  9241      \n 3        1 Mon     2014-01-06 13:27 Abila Zacharo    50.1  1286      \n 4        1 Mon     2014-01-06 19:50 Frydos Autosup… 274.   9241      \n 5        1 Mon     2014-01-06 07:54 Brew've Been S…  11.9  1286      \n 6        1 Tue     2014-01-07 12:00 Jack's Magical…  18.8  9241      \n 7        1 Tue     2014-01-07 13:24 Kalami Kafenion  45.0  1286      \n 8        1 Tue     2014-01-07 20:15 Ouzeri Elian     11.4  9241      \n 9        1 Wed     2014-01-08 08:16 Brew've Been S…   7.26 1286      \n10        1 Wed     2014-01-08 12:00 Jack's Magical…  18.8  9241      \n# … with 1,486 more rows, and 1 more variable: loyaltynum.x <chr>\n\n\n   loyaltynum last4ccnum.x ccPerson last4ccnum.y\n1       L1107         2681       12         2681\n2       L1485         3853       17         3853\n3       L1682         7253       33         7253\n4       L2070         8332       43         8332\n5       L2070         4795       20         4795\n6       L2169         4434       18         4434\n7       L2247         5368       23         5368\n8       L2247         7889       39         7889\n9       L2343         8202       42         8202\n10      L2459         5010       22         5010\n11      L2490         3484       13         3484\n12      L2769         8642       45         8642\n13      L3014         1877        6         1877\n14      L3191         9635       53         9635\n15      L3259         9405       49         9405\n16      L3288         1286        1         1286\n17      L3288         9241       48         9241\n18      L3295         5921       25         5921\n19      L3295         4948       21         4948\n20      L3317         2276        8         2276\n21      L3366         6895       28         6895\n22      L3572         1286        1         1286\n23      L3800         7384       35         7384\n24      L4034         5407       24         5407\n25      L4063         9220       47         9220\n26      L4149         1321        3         1321\n27      L4164         7688       36         7688\n28      L4424         1874        5         1874\n29      L5224         8156       41         8156\n30      L5259         7819       38         7819\n31      L5485         9152       46         9152\n32      L5553         9617       52         9617\n33      L5756         7792       37         7792\n34      L5777         9551       50         9551\n35      L5924         9614       51         9614\n36      L5947         2540       11         2540\n37      L6110         8411       44         8411\n38      L6110         7354       34         7354\n39      L6119         7889       39         7889\n40      L6119         5368       23         5368\n41      L6267         6691       26         6691\n42      L6267         6899       29         6899\n43      L6417         7117       32         7117\n44      L6544         7108       31         7108\n45      L6886         2463       10         2463\n46      L7291         9683       54         9683\n47      L7761         3506       15         3506\n48      L7783         1415        4         1415\n49      L7814         3492       14         3492\n50      L8012         1310        2         1310\n51      L8148         6816       27         6816\n52      L8328         8129       40         8129\n53      L8477         4530       19         4530\n54      L8566         4795       20         4795\n55      L8566         8332       43         8332\n56      L9018         2418        9         2418\n57      L9254         7354       34         7354\n58      L9362         3547       16         3547\n59      L9363         6901       30         6901\n60      L9406         8202       42         8202\n61      L9406         4948       21         4948\n62      L9406         5921       25         5921\n63      L9633         9735       55         9735\n64      L9637         2142        7         2142\n\nSwap\n\n\n\nImporting GPS\nConverting Timestamp to “Year-Month-Day Hour:Minutes” (YYYY-MM-DD HH:MM) format\nSeparate Timestamp into 2 new columns (Date & Time)\nConverting data type for id to factor\n\n\ngps <- read_csv(\"MC2/gps.csv\") %>%\n  mutate(date = as.Date(mdy_hms(Timestamp)), time = format(mdy_hms(Timestamp), \"%H:%M\"))\n\ngps$Timestamp <- date_time_parse(gps$Timestamp, zone = \"\", format = \"%m/%d/%Y %H:%M:%S\")  \ngps$hr <- strftime(gps$Timestamp, \"%H\")\ngps$id <- as_factor(gps$id)\ngps$weekday = wday(gps$date, label = TRUE, abbr = TRUE) \n\ngps\n\n\n# A tibble: 685,169 x 8\n   Timestamp           id      lat  long date       time  hr   \n   <dttm>              <fct> <dbl> <dbl> <date>     <chr> <chr>\n 1 2014-01-06 06:28:01 35     36.1  24.9 2014-01-06 06:28 06   \n 2 2014-01-06 06:28:01 35     36.1  24.9 2014-01-06 06:28 06   \n 3 2014-01-06 06:28:03 35     36.1  24.9 2014-01-06 06:28 06   \n 4 2014-01-06 06:28:05 35     36.1  24.9 2014-01-06 06:28 06   \n 5 2014-01-06 06:28:06 35     36.1  24.9 2014-01-06 06:28 06   \n 6 2014-01-06 06:28:07 35     36.1  24.9 2014-01-06 06:28 06   \n 7 2014-01-06 06:28:09 35     36.1  24.9 2014-01-06 06:28 06   \n 8 2014-01-06 06:28:10 35     36.1  24.9 2014-01-06 06:28 06   \n 9 2014-01-06 06:28:11 35     36.1  24.9 2014-01-06 06:28 06   \n10 2014-01-06 06:28:12 35     36.1  24.9 2014-01-06 06:28 06   \n# … with 685,159 more rows, and 1 more variable: weekday <ord>\n\nCar coordinates when vehicle stopped\nI am eliminating coordinates that indicating that the car is moving The GPS car coordinates are recorded every 1-5 secs. Therefore, if there is a GPS record difference of more than 5 min, which means the employee has driven the car to a destination. Thus this eliminates possible traffic light stops and car moving in motion data.\nFor each employee: 1. I am getting the first and last car coordinate each day 2. Getting places of interest through the day\n\n\nts <- gps %>%\n  group_by(id) %>%\n    arrange(date, time, by_group=TRUE) %>%\n      mutate(diff = round(c(difftime(tail(Timestamp, -1), head(Timestamp, -1), units = \"mins\"), 0)), 2) %>%\n      mutate(count = 1:n(), FIRST = count == 1, LAST = count == max(count)) %>%\n        filter(diff > 5 | FIRST == TRUE | LAST == TRUE) %>%\n  arrange(id) %>%\n  select(id, lat, long, date, time, diff, hr, weekday)\n\nts\n\n\n# A tibble: 3,133 x 8\n# Groups:   id [40]\n   id      lat  long date       time  diff     hr    weekday\n   <fct> <dbl> <dbl> <date>     <chr> <drtn>   <chr> <ord>  \n 1 1      36.1  24.9 2014-01-06 07:20   0 mins 07    Mon    \n 2 1      36.1  24.9 2014-01-06 07:22  35 mins 07    Mon    \n 3 1      36.0  24.9 2014-01-06 08:04 253 mins 08    Mon    \n 4 1      36.1  24.9 2014-01-06 12:26  59 mins 12    Mon    \n 5 1      36.0  24.9 2014-01-06 13:34 250 mins 13    Mon    \n 6 1      36.1  24.9 2014-01-06 17:48 108 mins 17    Mon    \n 7 1      36.1  24.9 2014-01-06 19:42   7 mins 19    Mon    \n 8 1      36.1  24.9 2014-01-06 19:49  38 mins 19    Mon    \n 9 1      36.1  24.9 2014-01-06 20:33  98 mins 20    Mon    \n10 1      36.0  24.9 2014-01-06 22:15  46 mins 22    Mon    \n# … with 3,123 more rows\n\nCompare GPS to credit card\n\n# A tibble: 3,777 x 14\n# Groups:   id [37]\n   id      lat  long date       time.x diff   hr    weekday.x time.y\n   <fct> <dbl> <dbl> <date>     <chr>  <drtn> <chr> <ord>     <chr> \n 1 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:27 \n 2 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:31 \n 3 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:33 \n 4 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:35 \n 5 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:37 \n 6 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:41 \n 7 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:45 \n 8 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:46 \n 9 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:46 \n10 1      36.1  24.9 2014-01-06 07:20  0 mins 07    Mon       07:47 \n# … with 3,767 more rows, and 5 more variables: location <chr>,\n#   price <dbl>, last4ccnum <chr>, loyaltynum <chr>, weekday.y <ord>\n\n\n\n\n\nclass      : RasterLayer \nband       : 1  (of  3  bands)\ndimensions : 1618, 2716, 4394488  (nrow, ncol, ncell)\nresolution : 3.148491e-05, 3.148491e-05  (x, y)\nextent     : 24.82429, 24.9098, 36.04476, 36.0957  (xmin, xmax, ymin, ymax)\ncrs        : +proj=longlat +datum=WGS84 +no_defs \nsource     : /Users/yuntinghong/Documents/SMU/ISSS608 - Visual Analytics/hongyunting/YTBlog_ISSS608/_posts/2021-07-04-yt-assignment-mc2/MC2/Geospatial/MC2-tourist_modified.tif \nnames      : MC2.tourist_modified \nvalues     : 0, 255  (min, max)\n\n\n\nOGR data source with driver: ESRI Shapefile \nSource: \"/Users/yuntinghong/Documents/SMU/ISSS608 - Visual Analytics/hongyunting/YTBlog_ISSS608/_posts/2021-07-04-yt-assignment-mc2/MC2/Geospatial\", layer: \"Abila\"\nwith 3290 features\nIt has 9 fields\nInteger64 fields read as strings:  TLID \nclass       : SpatialLinesDataFrame \nfeatures    : 3290 \nextent      : 24.82401, 24.90997, 36.04501, 36.09492  (xmin, xmax, ymin, ymax)\ncrs         : +proj=longlat +datum=WGS84 +no_defs \nvariables   : 9\nnames       :      TLID, FEDIRP,  FENAME, FETYPE, FEDIRS, FRADDL, TOADDL, FRADDR, TOADDR \nmin values  : 184619449,      N,   Acera,    Ave,      N,      1,     20,      1,     17 \nmax values  : 184714869,      S, Zefirou,    Way,      N,   7400,   7498,   7401,   7499 \n\n\n\n\nMap view of Abila, Kronos’s route and Employees’ whereabout\n\n\ntmap_mode(\"view\")\ntm_shape(bgmap) + \n  tm_rgb(bgmap, r = 1, g = 2, b = 3, # setting red to band 1, green to band 2, blue to band 3\n         alpha = NA,\n         saturation = 1,\n         interpolate = TRUE, \n         max.value = 255) +\n  tmap_options(max.categories = 44) +\n  tm_shape(Abila_st) + \n    tm_lines() +\n  tm_shape(gps_sf_path) +\n    tm_dots(col =\"id\",\n            popup.vars=c(\"Date:\"=\"date\", \"Time:\"=\"time\", \"Week:\"=\"weekday\"))\n\n\npreserve9a6948eee8a9d963\n\nStoring location coordinates\n\n\nid <- c(\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\")\n\nlocation <- c(\"Brew've Been Served\",\"Hallowed Grounds\",\"Brew've Been Served\",\"Coffee Cameleon\",\"Abila Airport\",\"Kronos Pipe and Irrigation\",\"Nationwide Refinery\",\"Maximum Iron and Steel\",\"Stewart and Sons Fabrication\",\"Carlyle Chemical Inc.\",\"Coffee Shack\",\"Bean There Done That\",\"Brewed Awakenings\",\"Jack's Magical Beans\",\"Katerinaís CafÈ\",\"Hippokampos\",\"Abila Zacharo\",\"Gelatogalore\",\"Kalami Kafenion\",\"Ouzeri Elian\",\"Guy's Gyros\",\"U-Pump\",\"Frydos Autosupply n' More\",\"Albert's Fine Clothing\",\"Shoppers' Delight\",\"Abila Scrapyard\",\"Frank's Fuel\",\"Chostus Hotel\",\"General Grocer\",\"Kronos Mart\",\"Octavio's Office Supplies\",\"Roberts and Sons\",\"Ahaggo Museum\",\"Desafio Golf Course\",\"Daily Dealz\", \"GAStech\")\n\n\n#lat <- c(23, 41, 32, 58, 26)\n#long <-\ndesc <- c(\"Calixto Nils's house\",\"Azada Lars's house\",\"Balas Felix's house\",\"Barranco Ingrid's house\",\"Baza Isak's house\",\"Bergen Linnea's house\",\"Orilla Elsa's house\",\"Alcazar Lucas's house\",\"Cazar Gustav's house\",\"Campo-Corrente Ada's house\",\"Calzas Axel's house\",\"Cocinaro Hideki's house\",\"Ferro Inga's house\",\"Dedos Lidelse's house\",\"Bodrogi Loreto's house\",\"Vann Isia's house\",\"Flecha Sven's house\",\"Frente Birgitta's house\",\"Frente Vira's house\",\"Fusil Stenig's house\",\"Osvaldo Hennie's house\",\"Nubarron Adra's house\",\"Lagos Varja's house\",\"Mies Minke's house\",\"Herrero Kanon's house\",\"Onda Marin's house\",\"Orilla Kare's house\",\"Borrasca Isande's house\",\"Ovan Bertrand's house\",\"Resumir Felix's house\",\"Sanjorge Jr. Sten's house\",\"Strum Orhan's house\",\"Tempestad Brand's house\",\"Vann Edvard's house\",\"Vasco-Pais Willem's house\")\n  \n\ndf <- data.frame(id, desc)\ndf\n\n\n   id                       desc\n1   1       Calixto Nils's house\n2   2         Azada Lars's house\n3   3        Balas Felix's house\n4   4    Barranco Ingrid's house\n5   5          Baza Isak's house\n6   6      Bergen Linnea's house\n7   7        Orilla Elsa's house\n8   8      Alcazar Lucas's house\n9   9       Cazar Gustav's house\n10 10 Campo-Corrente Ada's house\n11 11        Calzas Axel's house\n12 12    Cocinaro Hideki's house\n13 13         Ferro Inga's house\n14 14      Dedos Lidelse's house\n15 15     Bodrogi Loreto's house\n16 16          Vann Isia's house\n17 17        Flecha Sven's house\n18 18    Frente Birgitta's house\n19 19        Frente Vira's house\n20 20       Fusil Stenig's house\n21 21     Osvaldo Hennie's house\n22 22      Nubarron Adra's house\n23 23        Lagos Varja's house\n24 24         Mies Minke's house\n25 25      Herrero Kanon's house\n26 26         Onda Marin's house\n27 27        Orilla Kare's house\n28 28    Borrasca Isande's house\n29 29      Ovan Bertrand's house\n30 30      Resumir Felix's house\n31 31  Sanjorge Jr. Sten's house\n32 32        Strum Orhan's house\n33 33    Tempestad Brand's house\n34 34        Vann Edvard's house\n35 35  Vasco-Pais Willem's house\n\n\n\n\n",
    "preview": "posts/2021-07-04-yt-assignment-mc2/yt-assignment-mc2_files/figure-html5/unnamed-chunk-15-1.png",
    "last_modified": "2021-07-17T09:16:51+08:00",
    "input_file": "yt-assignment-mc2.knit.md"
  },
  {
    "path": "posts/2021-06-13-dataviz-makeover-2/",
    "title": "DataViz Makeover 2",
    "description": "SMU ISSS608 DataViz Makeover 2: Exploring different prespective on Merchandise Trade with Partnering Markets",
    "author": [
      {
        "name": "Hong, Yun Ting",
        "url": "https://www.linkedin.com/in/yuntinghong/"
      }
    ],
    "date": "2021-06-13",
    "categories": [],
    "contents": "\n\nContents\n1.0 Critiques on the original design1.1 Clarity\n1.2 Aesthetics\n\n2.0. Alternative Design2.1 Clarity\n2.2 Aesthetics\n\n3.0. Proposed Data Visualization\n4.0. Data Visualisation Step-by-Step4.1. Data Preparation with Excel and Tableau\n4.2 Creating Chart\n\n5.0. Final Visualization5.1. Snapshot of Graph\n5.2. Major Observation and/or derived Insights\n\n\n1.0 Critiques on the original design\nThis is the original design to illustrate Singapore’s Merchandise Trade Performance with Major Partners in 2020 \n1.1 Clarity\n(a) Incomplete axis labelling of both x-axis and y-axis: Although bubble chart label notation indicates ‘Bil’ (which means Billion), we are unclear if x-axis and y-axis are in ‘Bil’ units too as the units are missing from both x-axis and y-axis. Moreover, axis labelling (Import & Export) are placed at the bottom left corner of the chart which can cause confusion as to which axis is Import and Export. This can be improved by placing it at the end of the axis instead.\n(b) Unclear label notation on bubble chart: Each countries are accompanied with a value label notation. However, we will not be able to differentiate whether this value is referring to total merchandise trade value or Net-Net value.\n(c) Missing chart title:  Title is missing from this chart and we are not able to determine what is this chart trying to tell us without looking at Department of Statistics website. We would not have known that this chart is a representation of Singapore Merchandise Trade Performance with majoring Partnering partners in which year or across which years.\n1.2 Aesthetics\n(a) Bubble overlapping: This is a interactive bubble chart as seen in Department of Statistics website. However, at first glance or without interacting with the chart, we are unable to view all the white circles (which indicating whether is it Net-Exporter or Net-Importers). It is hidden by overlapping solid colored bubble. This aesthetic leads to the clarity of the chart.\n(b) No focus area is highlighted: The bubble chart aesthetics are colorful, However, the graph looks cluttered and no focus point. Instead of using solid colors for all partners and introducing additional symbols into the chart with side note, the bubble chart colors should be darker for Taiwan and Hong Kong to bring the focus on this 2 partners and a lighter color for the rest and a small text notation beside Taiwan and Hong Kong to indicate Top Net Importer/Exporter\n(c) Interactive Design does not have much feature:  This chart is an interactive chart, however, if we are looking at multiple years, there is no features to view other years.\n2.0. Alternative Design\n\n2.1 Clarity\n(a) A Short Description in title section:  Write a short description to describe what is kind of information is this chart protraying. For example, is it indicating Net Importer/Exporter or Total Merchandise Trade value.\n(b) Proper Labelling on x and y-axis:  Since the data are revolving around billions unit, it is best to add the unit (B) to x and y axis’s markers.\n(c) Add filter for interactive design:  We are looking at a range of 10 years data, therefore it is best to have a year filter to navigate and see the transition from year to year for a better user experience.\n2.2 Aesthetics\n(a) Introduce opacity to bubble chart: Add opacity level of 20-30% to introduce transparency to bubble chart in case of overlapping points.\n(b) Bubble chart color scheme:  Intead of using different solid colors for different countries as per what DoSS has done, I introduce a red-blue diverging color scheme to different between Net Importer and Net Exporter. For points below the line will be colored closer o dark red and points above the line will be colored close to dark blue.\n(c) Reduce the number of colors and symbols:  As compared to the original graph from DoSS, it is flushed with numerous colors and there is no focus points. In my proposed visualisation, I opted for a simple and clean chart to protray the information. This way, it will not be too cluttered and would not confused the readers.\n3.0. Proposed Data Visualization\nRaw data are available at DoSS, under sub-section of Merchandise Trade by Region/Market.\nActual Data Visualization can be viewed at Tableau Public here\n4.0. Data Visualisation Step-by-Step\n4.1. Data Preparation with Excel and Tableau\nDownload and Open Excelsheet from DoSS\nRemove Unnecessary rows\nRename worksheet T1 to ‘Import’ and T2 to ‘Export’\n\nOne of the partners which we are interested on is European Union. However, the data is in Text format and Billion dollars.\nChange the change from ‘Text’ to ‘Number’\n\nCreate a new row in excel to convert European Union to Thousand Dollars unit. Input the formula (=IF(B7<>“na”, B7 * 1000, “na”)) and apply it to the whole row \nImport the excel data into Tableau \nDrag & Drop “Import” Data Source into the blank space \nProceed to Filter out the 10 Trading Partners (European Union, Hong Kong, Indonesia, Japan, Malaysia, Mainland China, Republic of Korea, Taiwan, Thailand, United States)\nClick on Filter at the top right hand corner \nClick on “Add” to select the variables of which we want to filter the data from \nSelect Variables (Which is essentially our trading partners) and Click OK \nSelect the 10 trading partners (Be mindful to choose “European Union (Thousand Dollars)” instead of “European Union (Million Dollar)”) \nSeparate out trading partner with dollar units\nClick on the little triangle and choose “Custom Split” \nInput “(” in ‘Use the Separator’ \nRename the newly created split column to your intended name by click on the little triangle > Rename \nHide all unused columns\nHold onto “Cntrl” key on the keyboard (“Command” for Mac) and select the year from 1976 Jan to 2010 Dec, 2021 Jan to 2021 May > Click on the little triangle > Hide \nRe-arrange data such that Period are gathered in 1 single column, per country\nHold down on Cntrl key and Select 2011 Jan to 2020 Dec > Click on little triangle > Pivot \nSave the edited data into a CSV file. Click on Sheet 1 at the bottom tab > Right Click on the Data “Import(outputFile)” > Export Data to CSV > Export \nRepeat Step 6 to 11 for “Export” trade Data\nThe next step is to merge both “Import” and “Export” CSV trade data together\nOpen “Export” CSV file, Copy and Paste it to a new worksheet in “Import” CSV file \nSave the CSV file (Final_output.xlsx) as XLSX to save both worksheet into 1 excel file \nImport (Final_output.xlsx) into Tableau \nCombine “Import” and “Export” worksheet into 1 datasource\nDouble click on “Import” and the screen will display “Import is made of 1 table” \nDrag & Drop “Export” next to Import. A venn diagram symbol is created between “Import” and Export\"\n\n4.2 Creating Chart\nNavigate to a new sheet in Tableau.\nCreate new parameters (Total Import and Total Export) Analysis > Create Calculated Field For “Total Import”: SUM([Import Amt]) For “Total Export”: SUM([Export Amt]) \nDrag & Drop “Total Import” to Rows and “Total Export” to Columns \nCreate another Calculated field for Total Merchandise Trade Amount Analysis > Create Calculated Field “Total Trade Amt”: SUM([Import Amt]) + SUM([Export Amt]) \nDrag & Drop “Total Trade Amt” to Size, and click on “Size” and adjust the slider \nCreate another calculated field Analysis > Create Calculated Field “Net Importer”: [Total Import] - Total Export \nDrag & Drop “Net Importer” to Color \nEdit the colors of the bubble plot\nAt the right panel, find “AGG(Net Importer)” and click on the little triangle > Edit Colors \nChoose Red-Blue Diverging \nCheck “Use Full Color Range” and Click OK \nClick on Colors and change teh opacity of the bubble color\n\nBuild Filters for Period\nDrag & Drop Period into Filters \nSelect “Years” and click Next >\n\nSelect all 10 of 10 values and click OK\n\nBuild filter for Country\nDrag & Drop Country into Filter \nSelect all 10 countries and click OK\n\nDisplay the filter Under Filter > Click on little triangle > Show Filter (Do it for YEAR(Period) and Country)\n\nEdit the filter display type\nOn the right panel:\n“Year” - click on little triangle > Single Value (Slider)\n“Country” - Click on little triangle > Multiple Values (List)\n\nRemove “All” from Year Filter.\nClick on little triangle > Customize > Uncheck “Show”All\" Value\"\n\nAdding Reference Line to differentiate Net Importer and Net Exporter\nAnalysis > Create Calculated Field\n\nDrag & Drop “Reference Line” on Rows \nAdjusted the Properties for Reference Line\nDrag & Remove all properties except “Country” in details\nChange from Circle to Line Chart\nChange the Size to the smallest\nChange the color to black\n\nRight click on the line chart > Trend Lines > Show Trend Lines \nOnce you have done the above step correctly, it will look like this \nHowever, if you notice, the diagonal line is not drawing end to end.\nRight click on the axis > Edit Axis\n\nSelect “Fixed” and change the Fixed end to 8.5B\n\nA perfect diagonal line is drawn \nGo to the Row sections > Click on the little triangle > Dual Axis\n\n\nAdjust the trend line properties\nRight Click on the trend line > Format\nGo to “Trend Line” and Select dash line and slimmest line \nHide the Reference Line Header Right Click on Reference Line Axis > Uncheck Show header\n\nCreate another Calculated Field to show Country is Net Importer/Exporter in a particular year\nAnalysis > Create Calculated Field\n“Net Importer/Exporter”: IF[Total Import] > [Total Export] THEN “Net Importer” ELSE “Net Exporter” END\n\nDrag & Drop “Net Importer/Exporter” onto filter Choose all and click OK \nAnnotate Net Importer and Net Exporter onto chart\nRight click on an empty area in the chart > Annotate > Area\n\nDrag & Drop “Country” onto AGG(Total Import) > Label\nClick on Alignment and Select Middle for Vertical Section. This will display country label in the middle of the bubble\n\n5.0. Final Visualization\n5.1. Snapshot of Graph\n\n5.2. Major Observation and/or derived Insights\nBased on the data observed, Hong Kong has been consistently ranked as Singapore Top 1 Net Exporters from Year 2011 to 2020 and Indonesia is ranked Second in Net Exporters from 2011 to 2020 as well. Taiwan has gradually becoming one of Singapore Top Net Importers from 2011 to 2013 and has held Rank 1 for about 5 years before United States took it’s place in Rank 1 for 2 years.\nWhilst, Mainland China has been steadily ranked as the Singapore Top Importer and Exporter throughout the years, with the highest total merchandise trade values of more than $13 billions in the last 10 years, followed by Malaysia of more than $13 billions. Thailand on the other hand has the lowest total merchandise trade values of less than $4 billions.\n\n\n\n",
    "preview": {},
    "last_modified": "2021-06-20T20:51:24+08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-05-29-dataviz-makeover-1/",
    "title": "DataViz Makeover 1",
    "description": "SMU ISSS608 DataViz Makeover 1: \nData Visualization on Mechandise Trade by Region/Market",
    "author": [
      {
        "name": "Hong, Yun Ting",
        "url": "https://www.linkedin.com/in/yuntinghong/"
      }
    ],
    "date": "2021-05-29",
    "categories": [],
    "contents": "\n\nContents\n1.0 Critiques on the original design1.1 Clarity\n1.2 Aesthetics\n\n2.0. Alternative Design2.1. Advantages of proposed design\n\n3.0. Proposed Data Visualization\n4.0. Data Visualisation Step-by-Step4.1. Data Preparation in Excel\n4.2. Data Visualization in Tableau\n\n5.0. Final Visualization5.1. Snapshot of Graph\n5.2. Major Observation and/or derived Insights\n\n\n1.0 Critiques on the original design\nThis is the original design to illustrate Singapore’s Merchandise Trade with its Top Six Trading Countries from 2019 to 2020\n1.1 Clarity\nNo\nCritiques\nProposed Solution\n1\nTitle can be more informative - The title states what is the data showing, but it did not states what is the data is trying to portray\nCome out with a short description on what should the reader’s be expecting or gaining from the chart\n2\nInconsistent data used - Japan only shows Year 2020 data, whereas the other countries show data from Year 2019 to end of Year 2020\nData should be consistent throughout all countries for a fair comparison\n3\nUsing wrong type of chart - Area line chart is best used when there is at least 1 variable that represent a summation value\nSince ‘Import’ and Export’ are independent variables, I would recommend using line chart if we want to understand the trends.\n1.2 Aesthetics\nNo\nCritiques\nProposed Solution\n1\nNo focus area - There is no annotation or special colored data to indicate point of interest\nHighlight certain data to capture reader’s attention\n2\nX axis markers - X-axis title labeled Month of Period but the markers are only showing years\nShows the markers for months if the axis labeled months\n3\nTransparency of area chart - The opacity of the overlapping area is not prominent for both data to be seen clearly\nIncrease the transparency of ‘Import’ data\n2.0. Alternative Design\n\n2.1. Advantages of proposed design\n2.1.1 Clarity\nTitle tells a better story of what is to be expected from the graph and subtitle is used to annotate the overall chart.\nInstead of raw import and export data, this graph uses of Net Export formula (Export - Import) to illustrate the impact of Import and Export trades.\nAdded units to x axis label to indicate the data is a monetary value.\n2.1.2 Aesthetics\nAesthetically, a simple line chart shows a better trends between the 6 countries.\nColor coordinated, with red indicating negative figures (Trade Deficit) and blue indicating positive figures (Trade Surplus).\nAnnotation is used to highlight key points.\nEach line is accompanied with a country label instead of showing it as a separate legend.\nY axis is not divided into 6 segments, trends can be spotted with the level of granularity for the time period\n3.0. Proposed Data Visualization\nRaw data are available at DoSS, under sub-section of Merchandise Trade by Region/Market.\nActual Data Visualization can be viewed at Tableau Public here\n4.0. Data Visualisation Step-by-Step\n4.1. Data Preparation in Excel\nFilter out the 6 countries (Hong Kong, Mainland China, Japan, Malaysia, Taiwan and United States) from Import Worksheet. \nRetrieve data from Year 2019 Jan to Year 2020 Dec \nRepeat Step 1 and 2 again for Export worksheet\nConsolidate the data into a new worksheet \nTranspose data \nReorganize data into a new worksheet (Data), consisting only 4 columns (Period, Country, Import and Export) \n4.2. Data Visualization in Tableau\nImport the Excel Sheet into Tableau and select “Data” worksheet as Data Source\nChange Data Type\nChange ‘Period’ data type from String to Date\nChange ‘Import’ data type from String to Number (whole)\nChange ‘Export’ data type from String to Number (whole)\nCreate a calculate field to show Net Export\nUnder Analysis > ‘Create Calculated Field’ or Right Click on the left panel > ‘Create Calculated Field’\nInput Calculated Field ‘Net Export (S$)’ Formula:\nSUM([Import]) - SUM([Export])\nCreate a line chart to display Net Export from Year 2019 Jan to Year 2020 Dec\nDrag [Month(Period)] to Columns\nDrag [AGG(Net Export(S$))] to Rows\nSeparating Net Export data into Country level\nDrag [Country] into ‘Details’ and ‘Label’\nAdd colors to differentiate positive or negative net export\nDrag [AGG(Net Export(S$))] to ‘Color’ properties\nFormatting Colors\nOnce Step 5 is done, a color filter interface automatically appear in the right panel\nClick on the down arrow > Edit Colors…\nUnder Palette > Select ‘Red-Blue Diverging’\nCheck ‘Use Full Color Range’\nClick on Advance > Check Center and input 0 as the value\nAdd Annotation\nRight click on an empty space in the chart > Annotate > Area\n5.0. Final Visualization\n5.1. Snapshot of Graph\n\n5.2. Major Observation and/or derived Insights\nThere are 2 extreme trading trends gathered between Taiwan and Hong Kong.\nSingapore trading behavior with Taiwan within this period can assumed to have contributed to Singapore economic growth due to trade surplus. Taiwan main import goods are oil/petroleum and natural gas, in which happen to be Singapore main export goods. Taiwan main export goods are electrical equipment and machinery, however, Singapore are importing it more from other countries such as China, Malaysia and United States. Therefore, Singapore is importing less from Taiwan, and exporting more to Taiwan, creating trade surplus.\nOn the other hand, between 2019 to 2020, Singapore is experiencing trade deficit with Hong Kong. Hong Kong’s main exporting goods are electrical machinery, precious and minerals which Singapore needs. However, Hong Kong’s main imports goods are also machinery equipment which is largely provided by China and Singapore only stands a small percentage of the total export trade. This result in inflow of import goods exceeded the outflow of export goods and this create trade deficit.\nObservatory of Economic Complexity, 2019Singapore Import and Export data, 2019\n\n\n\n",
    "preview": {},
    "last_modified": "2021-05-30T19:12:18+08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-05-22-my-first-post/",
    "title": "My First Post",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Hong, Yun Ting",
        "url": "https://www.linkedin.com/in/yuntinghong/"
      }
    ],
    "date": "2021-05-22",
    "categories": [],
    "contents": "\n1.0 Overview\nIn this article, we will show you how to plot a figure with multiple histograms by using ggplot2 and ggpubr packages.\n2.0 Installing and Launching R Packages\nBefore you get started, you are required:\nto start a new R project, and\nsub-point\n\nto create a new R Markdown document.\nTo insert a graph,\n\nNext, you will use the code chunk below to install and launch ggpubr and tidyverse in RStudio.\nR code\npackages = c(‘ggpubr’, ‘tidyverse’)\nfor(p in packages){library if(!require(p, character.only = T)){ install.packages(p) } library(p, character.only = T) }\n3.0 Importing and Preparing The Data Set\nIn this hands-on exercise, the Wine Quality Data Set of UCI Machine Learning Repository will be used. The data set consists of 13 variables and 6497 observations. For the purpose of this exercise, we have combined the red wine and white wine data into one data file. It is called wine_quality and is in csv file format.\n3.1 Importing Data\nFirst, let us import the data into R by using read_csv() of readr package.\nR code\nwine <- read_csv(“data/wine_quality.csv”)\nNotice that beside quality and type, the rest of the variables are numerical and continuous data type.\n4.0 Univariate EDA with Histogram\nIn the figure below, multiple histograms are plottted by using ggplot() and geom_histogram() of ggplot2 package. Then, ggarrange() of ggpubr package is used to patch these histogram into a single figure to reveal the distribution of the selected variables in the wine quality data sets.\nRcode\nfa <- ggplot(data=wine, aes(x= fixed acidity)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) va <- ggplot(data=wine, aes(x= volatile acidity)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) ca <- ggplot(data=wine, aes(x= citric acid)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) rs <- ggplot(data=wine, aes(x= residual sugar)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) ch <- ggplot(data=wine, aes(x= chlorides)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) fSO2 <- ggplot(data=wine, aes(x= free sulfur dioxide)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) tSO2 <- ggplot(data=wine, aes(x= total sulfur dioxide)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) density <- ggplot(data=wine, aes(x= density)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) pH <- ggplot(data=wine, aes(x= pH)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) sulphates <- ggplot(data=wine, aes(x= sulphates)) + geom_histogram(bins=20, color=“black”, fill=“light blue”) alcohol <- ggplot(data=wine, aes(x= alcohol)) + geom_histogram(bins=20, color=“black”, fill=“light blue”)\nggarrange(fa, va, ca, rs, ch, fSO2, tSO2, density, pH, sulphates, alcohol, ncol = 4, nrow = 3)\n\n\n\n",
    "preview": {},
    "last_modified": "2021-05-30T15:38:29+08:00",
    "input_file": {}
  }
]
